# MATLANG - простой язык для простых матричных выражений

---

### Синтаксис
Объявление переменных начинается со специального слова `let`.
Командная строка должна заканчиваться символом `;`.
Ожидается, что строка начинается либо с `let`, либо с системной команды.
Матрицы должны быть объявлены в квадратных скобках `[]`, 
при этом она должна быть размерности хотя бы 1x1.

### Что в наличии?
Поддерживаются типы `Raional` и `Matrix` - рациональные числа и матрица соответственно. 
В наличии имеются следующие матричные команды:

1. `print` - печатает объект, можно передавать несколько объектов сразу;
2. `transpose` - возвращает новый объект, транспонированную матрицу;
3. `rref` - возвращает новый объект, улучшенный ступенчатый вид матрицы;
4. `to_diag` - возвращает новый объект, диагональный вид матрицы;
5. `to_triangle` - возвращает новый объект, треугольный вид матрицы;
6. `inv` - возвращает новый объект, обратную матрицу; 
7. `det` - возвращает определитель матрицы;
8. `rank` - возвращает ранг матрицы.

Реализована базовая арифметика типов: 
сложение/вычитание/умножение/деление рациональных чисел,
сложение/вычитание/умножение матриц, 
умножение/деление матриц на скаляр. 
Базовая арифметика поддерживает сложные скобочные выражения.

Пример скрипта:
```
let value = 133 + (4 / 3 - 1) * 2;
print(value, -value);
let A = [[2/3, 10, 4], 
         [-16/32, 2 * (-value - 3), value * 2 - 13], 
         [(13 - 2) / 3 * 3, (4 + 14) * (1/2), 2]];
print(transpose(A));
print(rref(A));
print(det(A));
print(rank(A));
print(A * transpose(A) - ((det(A) / rank(A) + 3) * A + to_diag(A)));
```

### Прочее
Собрать можно, запустив `build.sh` или с помощью `cmake`. 
Все сводится к работе с классом `Interpreter`: сейчас в `main.cpp` 
он принимает скрипт `matlang` со стандартного потока ввода, 
хотя этот же скрипт можно передать и в виде строки.

Также в репозитории лежит код телеграм-бота на `python`, 
который умеет считывать скрипт на `matlang` и возвращать его вывод.
Вначале он собирает интерпретатор через `build.sh`.
Он рассчитан на ОС Windows c WSL, но это легко исправить для Linux-систем,
если убрать первые 2 элемента из списка передаваемого в `subprocess.run` (а именно, `wsl` и `--exec`).
